<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xiaomi Store</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0d0d0d;
            --secondary-color: #f0f0f0;
            --accent-color: #ff4500; /* ‡∏™‡∏µ‡∏™‡πâ‡∏°‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå */
            --text-color: #e0e0e0;
            --light-text-color: #ffffff;
            --font-family: 'Prompt', sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--primary-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        /* Navbar */
        .navbar {
            background-color: rgba(0, 0, 0, 0.7);
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem 0;
            position: fixed;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid var(--accent-color);
        }

        .navbar a {
            color: var(--light-text-color);
            text-decoration: none;
            padding: 0.5rem 1rem;
            margin: 0 0.5rem;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .navbar a:hover {
            color: var(--accent-color);
        }

        /* Main Content */
        .main-content {
            padding: 8rem 2rem 4rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .page-header {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 3rem;
            color: var(--light-text-color);
            position: relative;
        }

        .page-header::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: var(--accent-color);
            margin: 10px auto 0;
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .product-card {
            background-color: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-10px);
        }

        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            cursor: pointer; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° cursor: pointer ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏° */
        }

        .product-info {
            padding: 1.5rem;
            text-align: center;
        }

        .product-info h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--light-text-color);
            cursor: pointer; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° cursor: pointer */
        }

        /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Å‡πà‡∏≤ */
        .old-price {
            text-decoration: line-through;
            color: #999;
            font-size: 0.9rem;
            margin-right: 10px;
        }
        
        /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î */
        .sale-price {
            color: var(--accent-color);
            font-weight: 600;
            display: block;
            margin-bottom: 0.5rem;
        }

        .buy-button {
            background-color: var(--accent-color);
            color: var(--light-text-color);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            text-transform: uppercase;
            text-decoration: none;
            display: inline-block;
            transition: background-color 0.3s ease;
        }

        .buy-button:hover {
            background-color: #ff6347;
        }

        /* Checkout Section */
        .checkout-container, .history-container {
            background-color: #1a1a1a;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            margin-bottom: 2rem;
        }

        .checkout-container h2, .history-container h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--light-text-color);
            position: relative;
            text-align: center;
        }

        .checkout-container h2::after, .history-container h2::after {
            content: '';
            display: block;
            width: 60px;
            height: 3px;
            background: var(--accent-color);
            margin: 10px auto 0;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #333;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .cart-item button:hover {
            background: #c82333;
        }

        .total {
            text-align: right;
            font-weight: 600;
            font-size: 1.2rem;
            margin-top: 1.5rem;
        }

        /* Form */
        .form-group {
            margin-top: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
        }

        input[type="text"], input[type="email"], input[type="tel"], input[type="date"], select, input[type="number"] {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #333;
            background-color: #2a2a2a;
            color: var(--text-color);
        }

        .payment-method {
            margin-top: 2rem;
        }
        
        .payment-method label {
            margin-right: 1.5rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
        }

        .checkout-btn, .history-btn, .clear-history-btn {
            margin-top: 1.5rem;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
        }

        .checkout-btn { background: #007bff; float: right; }
        .checkout-btn:hover { background: #0056b3; }
        .history-btn { background: #6c757d; float: left; }
        .history-btn:hover { background: #5a6268; }
        .clear-history-btn { background: #dc3545; float: right; margin-left: 10px; }
        .clear-history-btn:hover { background: #c82333; }
        .clearfix { clear: both; }

        #installment-info {
            margin-top: 5px;
            font-weight: 600;
            color: var(--accent-color);
        }
        
        /* Product Detail Page Styles */
        #product-detail-page {
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô */
        }
        
        .product-detail-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            background-color: #1a1a1a;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        .product-image-container {
            flex: 1;
            min-width: 300px;
        }
        
        .product-image-container img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .product-info-detail {
            flex: 2;
            min-width: 300px;
        }
        
        .product-info-detail h1 {
            font-size: 2.5rem;
            color: var(--light-text-color);
            margin-bottom: 1rem;
        }
        
        .product-info-detail .price {
            font-size: 2rem;
            color: var(--accent-color);
            margin-bottom: 1.5rem;
        }
        
        .product-info-detail .specs ul {
            list-style: none;
            padding-left: 0;
        }
        
        .product-info-detail .specs li {
            background-color: #2a2a2a;
            margin-bottom: 0.5rem;
            padding: 0.75rem;
            border-radius: 5px;
        }
        
        .back-button {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            text-transform: uppercase;
            margin-top: 1.5rem;
        }
        
        .back-button:hover {
            background-color: #5a6268;
        }
    </style>
</head>
<body>

<nav class="navbar">
    <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <a href="‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î.html">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a>
    <a href="‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ.html">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</a>
    <a href="‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô.html">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</a>
</nav>

<div class="main-content">
    <div id="product-list-page">
        <h1 class="page-header">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>
        <div class="product-grid">
            <div class="product-card">
                <img src="img/xiaomi1.png" alt="Xiaomi 13" onclick="showProductDetail('xiaomi13')">
                <div class="product-info">
                    <h3 onclick="showProductDetail('xiaomi13')">Xiaomi 13</h3>
                    <p>‡∏£‡∏≤‡∏Ñ‡∏≤: 42,000 ‡∏ö‡∏≤‡∏ó</p>
                    <button class="buy-button" onclick="addToCart('Xiaomi 13', 42000)">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                </div>
            </div>
            <div class="product-card">
                <img src="img/xiaomi2.png" alt="Xiaomi 14" onclick="showProductDetail('xiaomi14')">
                <div class="product-info">
                    <h3 onclick="showProductDetail('xiaomi14')">Xiaomi 14</h3>
                    <p>‡∏£‡∏≤‡∏Ñ‡∏≤: 42,000 ‡∏ö‡∏≤‡∏ó</p>
                    <button class="buy-button" onclick="addToCart('Xiaomi 14', 42000)">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                </div>
            </div>
            <div class="product-card">
                <img src="img/xiaomi3.png" alt="Xiaomi 15" onclick="showProductDetail('xiaomi15')">
                <div class="product-info">
                    <h3 onclick="showProductDetail('xiaomi15')">Xiaomi 15</h3>
                    <p>‡∏£‡∏≤‡∏Ñ‡∏≤: 42,000 ‡∏ö‡∏≤‡∏ó</p>
                    <button class="buy-button" onclick="addToCart('Xiaomi 15', 42000)">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                </div>
            </div>

        </div>

        <div class="checkout-container">
            <h2>üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
            <div id="cart-items"></div>
            <div class="total" id="total">‡∏£‡∏ß‡∏°: 0 ‡∏ö‡∏≤‡∏ó</div>

            <div class="form-group">
                <label for="buyer-name">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠:</label>
                <input type="text" id="buyer-name" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠" required>
            </div>
            <div class="form-group">
                <label for="buyer-phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</label>
                <input type="tel" id="buyer-phone" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" required>
            </div>
            
            <div class="form-group">
                <label for="buyer-email">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</label>
                <input type="email" id="buyer-email" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•" required>
            </div>


            <div class="payment-method">
                <label><input type="radio" name="payment" value="‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£" checked> ‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</label>
                <label><input type="radio" name="payment" value="‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï"> ‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï</label>
                <label><input type="radio" name="payment" value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</label>
                <label><input type="radio" name="payment" value="‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞"> ‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞</label>
            </div>

            <div class="form-group" id="installment-group" style="display:none;">
                <label for="installment-months">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏ß‡∏î‡∏ú‡πà‡∏≠‡∏ô (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô):</label>
                <input type="number" id="installment-months" min="1" max="36" placeholder="‡πÄ‡∏ä‡πà‡∏ô 6">
                <div id="installment-info"></div>
            </div>

            <div class="form-group">
                <label for="pickup-date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</label>
                <input type="date" id="pickup-date" required>
            </div>
            <div class="form-group">
                <label for="pickup-time">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</label>
                <select id="pickup-time" required>
                    <option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ --</option>
                    <option value="‡πÄ‡∏ä‡πâ‡∏≤ 9:00 - 12:00">‡πÄ‡∏ä‡πâ‡∏≤ 9:00 - 12:00</option>
                    <option value="‡∏ö‡πà‡∏≤‡∏¢ 13:00 - 16:00">‡∏ö‡πà‡∏≤‡∏¢ 13:00 - 16:00</option>
                    <option value="‡πÄ‡∏¢‡πá‡∏ô 17:00 - 19:00">‡πÄ‡∏¢‡πá‡∏ô 17:00 - 19:00</option>
                </select>
            </div>
            <div class="form-group">
                <label for="pickup-location">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</label>
                <input type="text" id="pickup-location" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î‡∏£‡∏±‡∏ö" required>
            </div>

            <button class="checkout-btn" onclick="checkout()">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
            <button class="history-btn" onclick="showHistory()">‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
            <button class="clear-history-btn" onclick="clearHistory()">‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
            <div class="clearfix"></div>
        </div>

        <div class="history-container">
            <h2>üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
            <div id="history-list">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</div>
        </div>
    </div>
    
    <div id="product-detail-page">
        <button class="back-button" onclick="showPage('product-list-page')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <div class="product-detail-container">
            <div class="product-image-container">
                <img id="detail-img" src="" alt="">
            </div>
            <div class="product-info-detail">
                <h1 id="detail-name"></h1>
                <p class="price" id="detail-price"></p>
                <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡πÄ‡∏û‡∏≤‡∏∞</h3>
                <div class="specs">
                    <ul id="detail-specs"></ul>
                </div>
                <h3>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏î‡πà‡∏ô</h3>
                <ul id="detail-features"></ul>
                <button class="buy-button" id="detail-buy-button">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
            </div>
        </div>
    </div>
</div>

<script>
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î 60% ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Xiaomi 15t pro
    const originalPrice = 42000;
    const discountPercentage = 60;
    const salePrice = originalPrice * (1 - discountPercentage / 100); // 42000 * 0.4 = 16800

    const products = {
        'xiaomi13': {
            name: 'Xiaomi 13',
            price: 42000,
            image: 'img/xiaomi1.png', 
            specs: [
                '‡∏ä‡∏¥‡∏õ: Snapdragon 8 Elite',
                '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 4.6 Ghz',
                'RAM: 16GB - 24GB',
                'ROM: 526GB - 1028GB',
                '‡∏à‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•: AMOLED Pro'
            ],
            features: [
                '‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡∏Å‡∏£‡∏∞‡πÅ‡∏ó‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏á',
                '‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û: ‡πÉ‡∏ä‡πâ‡∏ä‡∏¥‡∏õ‡∏™‡∏∏‡∏î‡πÅ‡∏£‡∏á ‡πÄ‡∏£‡πá‡∏ß',
                '‡∏Å‡∏•‡πâ‡∏≠‡∏á: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏ß‡∏¢‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ä‡∏≤‡∏ç‡∏â‡∏•‡∏≤‡∏î',
                '‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå: ‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤'
            ]
        },
        'xiaomi14': {
            name: 'Xiaomi 14',
            price: 42000,
            image: 'img/xiaomi2.png',
            specs: [
                '‡∏ä‡∏¥‡∏õ: Snapdragon 8 Elite Gen2',
                '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 4.7 Ghz',
                'RAM: 16GB - 32GB',
                'ROM: 1TB',
                '‡∏à‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•: AMOLED Ultra'
            ],
            features: [
                '‡∏ß‡∏±‡∏™‡∏î‡∏∏: ‡∏ï‡∏±‡∏ß‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏ó‡πÄ‡∏ó‡πÄ‡∏ô‡∏µ‡∏¢‡∏°',
                '‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û: ‡πÄ‡∏£‡πá‡∏ß ‡πÅ‡∏£‡∏á ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô',
                '‡∏Å‡∏•‡πâ‡∏≠‡∏á: ‡πÄ‡∏•‡∏ô‡∏™‡πå Leica Pro',
                '‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå: ‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤‡πÅ‡∏•‡∏∞‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°'
            ]
        },
        'xiaomi15': {
            name: 'Xiaomi 15',
            price: 42000,
            image: 'img/xiaomi3.png',
            specs: [
                '‡∏ä‡∏¥‡∏õ: Snapdragon 8 Elite Gen3',
                '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 4.8 Ghz',
                'RAM: 24GB - 64GB',
                'ROM: 2TB',
                '‡∏à‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•: Dynamic AMOLED X'
            ],
            features: [
                '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô: ‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏ù‡∏∏‡πà‡∏ô IP68',
                '‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û: ‡∏ä‡∏¥‡∏õ‡πÄ‡∏ã‡πá‡∏ï‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‡πÅ‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î',
                '‡∏Å‡∏•‡πâ‡∏≠‡∏á: ‡∏£‡∏∞‡∏ö‡∏ö AI Photography ‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á',
                '‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå: ‡∏ö‡∏≤‡∏á‡πÄ‡∏ö‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©'
            ]
        }
    };

    let cart = [];
    let currentProductId = ''; 

    function showPage(pageId) {
        document.getElementById('product-list-page').style.display = 'none';
        document.getElementById('product-detail-page').style.display = 'none';
        document.getElementById(pageId).style.display = 'block';
    }

    function showProductDetail(productId) {
        const product = products[productId];
        if (!product) {
            console.error("Product not found:", productId);
            return;
        }

        currentProductId = productId; 
        document.getElementById('detail-img').src = product.image;
        document.getElementById('detail-img').alt = product.name;
        document.getElementById('detail-name').innerText = product.name;
        
        // **‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**
        let priceHtml = `‡∏£‡∏≤‡∏Ñ‡∏≤: ${product.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó`;
        if (product.originalPrice) {
            priceHtml = `
                <span style="font-size: 1.2rem; color: #999; text-decoration: line-through; margin-right: 15px;">${product.originalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
                <span style="font-size: 2rem; color: var(--accent-color); font-weight: bold;">${product.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
                <span style="color: #4CAF50; font-weight: bold; margin-left: 10px;">(‡∏•‡∏î 60%)</span>
            `;
        } else {
            priceHtml = `‡∏£‡∏≤‡∏Ñ‡∏≤: ${product.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó`;
        }

        document.getElementById('detail-price').innerHTML = priceHtml;
        
        const specsList = document.getElementById('detail-specs');
        specsList.innerHTML = product.specs.map(spec => `<li>${spec}</li>`).join('');
        
        const featuresList = document.getElementById('detail-features');
        featuresList.innerHTML = product.features.map(feature => `<li>${feature}</li>`).join('');
        
        const buyButton = document.getElementById('detail-buy-button');
        buyButton.onclick = () => {
            addToCart(product.name, product.price);
            showPage('product-list-page');
        };

        showPage('product-detail-page');
    }

    function loadCart() {
        const saved = localStorage.getItem("cart");
        if (saved) {
            cart = JSON.parse(saved);
            renderCart();
        }
    }

    function saveCart() {
        localStorage.setItem("cart", JSON.stringify(cart));
    }

    function addToCart(name, price) {
        cart.push({ name, price });
        saveCart();
        renderCart();
        alert(`${name} ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß!`);
    }

    function removeFromCart(index) {
        cart.splice(index, 1);
        saveCart();
        renderCart();
    }

    function renderCart() {
        const list = document.getElementById("cart-items");
        const totalElement = document.getElementById("total");
        let sum = 0;
        list.innerHTML = "";
        cart.forEach((item, i) => {
            sum += item.price;
            list.innerHTML += `
                <div class="cart-item">
                    <span>${item.name} (${item.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó)</span>
                    <button onclick="removeFromCart(${i})">‡∏•‡∏ö</button>
                </div>
            `;
        });
        totalElement.innerText = "‡∏£‡∏ß‡∏°: " + sum.toLocaleString() + " ‡∏ö‡∏≤‡∏ó";
        calculateInstallment(); 
    }

    function getSelectedPaymentMethod() {
        const methods = document.getElementsByName("payment");
        for (const m of methods) {
            if (m.checked) return m.value;
        }
        return "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏";
    }

    function onPaymentMethodChange() {
        const selected = getSelectedPaymentMethod();
        const installmentGroup = document.getElementById('installment-group');
        
        if (selected === "‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞") {
            installmentGroup.style.display = 'block';
            calculateInstallment();
        } else {
            installmentGroup.style.display = 'none';
            document.getElementById('installment-info').innerText = "";
        }
    }

    function calculateInstallment() {
        const paymentMethod = getSelectedPaymentMethod();
        const installmentInfo = document.getElementById('installment-info');
        
        if (paymentMethod !== "‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞") {
            installmentInfo.innerText = "";
            return;
        }

        const monthsInput = document.getElementById('installment-months');
        const months = parseInt(monthsInput.value);
        const total = cart.reduce((sum, item) => sum + item.price, 0);

        if (total === 0) {
            installmentInfo.innerText = "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤";
            return;
        }

        if (months > 0) {
            const monthlyPayment = total / months;
            installmentInfo.innerText = `‡∏¢‡∏≠‡∏î‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô: ${monthlyPayment.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó`;
        } else {
            installmentInfo.innerText = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏ß‡∏î‡∏ú‡πà‡∏≠‡∏ô";
        }
    }

    function checkout() {
        if (cart.length === 0) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô");
            return;
        }

        const buyerName = document.getElementById('buyer-name').value;
        const buyerPhone = document.getElementById('buyer-phone').value;
        const buyerEmail = document.getElementById('buyer-email').value; // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ email
        const pickupDate = document.getElementById('pickup-date').value;
        const pickupTime = document.getElementById('pickup-time').value;
        const pickupLocation = document.getElementById('pickup-location').value;
        const paymentMethod = getSelectedPaymentMethod();

        if (!buyerName || !buyerPhone || !buyerEmail || !pickupDate || !pickupTime || !pickupLocation) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
            return;
        }
        
        const total = cart.reduce((sum, item) => sum + item.price, 0);
        let orderDetails = {
            date: new Date().toLocaleString('th-TH'), 
            items: cart.map(item => ({ name: item.name, price: item.price })),
            total: total,
            buyerInfo: {
                name: buyerName,
                phone: buyerPhone,
                email: buyerEmail
            },
            paymentMethod: paymentMethod,
            pickupInfo: {
                date: pickupDate,
                time: pickupTime,
                location: pickupLocation
            }
        };

        if (paymentMethod === "‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞") {
            const months = document.getElementById('installment-months').value;
            const monthlyPayment = total / months;
            if (parseInt(months) <= 0 || isNaN(monthlyPayment)) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏ß‡∏î‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
                return;
            }
            orderDetails.installment = {
                months: parseInt(months),
                monthlyPayment: monthlyPayment
            };
        }

        let history = JSON.parse(localStorage.getItem("history")) || [];
        history.push(orderDetails);
        localStorage.setItem("history", JSON.stringify(history));

        alert("‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô");
        
        // ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        cart = [];
        saveCart();
        renderCart();
        
        // ‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
        document.getElementById('buyer-name').value = '';
        document.getElementById('buyer-phone').value = '';
        document.getElementById('buyer-email').value = '';
        document.getElementById('pickup-date').value = '';
        document.getElementById('pickup-time').value = '';
        document.getElementById('pickup-location').value = '';
        
        showHistory(); 
    }

    function showHistory() {
        const historyList = document.getElementById("history-list");
        const history = JSON.parse(localStorage.getItem("history")) || [];

        if (history.length === 0) {
            historyList.innerHTML = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠";
            return;
        }

        historyList.innerHTML = "";
        history.reverse().forEach((order, i) => { 
            const orderTotal = order.total;
            const itemsHtml = order.items.map(item => `<li>${item.name} (${item.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó)</li>`).join('');
            
            let installmentHtml = '';
            if (order.installment) {
                installmentHtml = `<p><strong>‡∏¢‡∏≠‡∏î‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</strong> ${order.installment.monthlyPayment.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó (‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ ${order.installment.months} ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</p>`;
            }

            const displayIndex = history.length - i; 

            historyList.innerHTML += `
                <div style="border-top: 1px solid #333; padding-top: 1rem; margin-top: 1rem;">
                    <h4>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #${displayIndex}</h4>
                    <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:</strong> ${order.date}</p>
                    <p><strong>‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠:</strong> ${order.buyerInfo.name}</p>
                    <p><strong>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</strong> ${order.paymentMethod}</p>
                    <p><strong>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:</strong> ${orderTotal.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                    ${installmentHtml}
                    <p><strong>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</strong></p>
                    <ul style="padding-left: 20px;">${itemsHtml}</ul>
                    <p><strong>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏î‡∏£‡∏±‡∏ö:</strong> ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${order.pickupInfo.date}, ‡πÄ‡∏ß‡∏•‡∏≤ ${order.pickupInfo.time}, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${order.pickupInfo.location}</p>
                </div>
            `;
        });
    }

    function clearHistory() {
        if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) {
            localStorage.removeItem("history");
            showHistory();
            alert("‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
        }
    }

    document.addEventListener("DOMContentLoaded", () => {
        loadCart();
        showHistory();
        
        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
        const paymentMethods = document.getElementsByName('payment');
        paymentMethods.forEach(radio => radio.addEventListener('change', onPaymentMethodChange));
        
        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞
        document.getElementById('installment-months').addEventListener('input', calculateInstallment);
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
        onPaymentMethodChange(); 
        
        showPage('product-list-page'); // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
    });
</script>

</body>
</html>
